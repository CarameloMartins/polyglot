<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Polyglot by jestlabs</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/jestlabs/polyglot">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/jestlabs/polyglot/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/jestlabs/polyglot/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Polyglot</h1>
          <p>A language detector written in Python 2.7.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/jestlabs">jestlabs</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <p>It's heavily inspired in <a href="https://github.com/github/linguist"> Linguist </a> by GitHub.</p>

<p>This project was born as a learning experience with the Python language. It's  meant to be taken seriously but, still, is far from what Linguist is capable of.</p>

<p>We still have a lot to work on.</p>

<pre><code>NAME:
        polyglot - Know your languages. A language detector written in Python 2.7.
USAGE:
        python polyglot.py [options] [args]
VERSION:
        0.0.3
OPTIONS:
        -p  print programming languages only
        -d  print data files only
        -m  print markup files only
        -a  print every file
        --json  used before any of the above to produce JSON output
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Polyglot can be used a stand-alone application, it can be imported as a module or it can be used as a backend script producing JSON.
Furthermore, there is a debug unknown languages option and several flags to choose from.</p>

<h3>
<a name="arguments" class="anchor" href="#arguments"><span class="octicon octicon-link"></span></a>Arguments</h3>

<p>When running Polyglot, as an app or by importing it as a module, there are some variants you can opt for. 
There are flags that narrow down the search to a specific type of file and also a debug option that includes unknown files in the output. You can read about them in the flags and debug chapters.</p>

<p>The only required argument is the file name that can be a relative or absolute path or just a file name (in which case Polyglot will try to find the file path). The optional flag argument must be one of the following strings <code>["all", "programming", "data", "markup"]</code>. <code>"all"</code> is the default value. Additionally, you can also use the <code>--json</code> option along with one of the flags to receive the output as valid JSON.
The debug argument can either be True or False, being False the default value.</p>

<h4>
<a name="flags" class="anchor" href="#flags"><span class="octicon octicon-link"></span></a>Flags</h4>

<p>Apart from this, there are still some flags that impact the output of polyglot. If you run with <code>-h</code> option you can see all of them:</p>

<pre><code>$ python polyglot.py -h

Polyglot supports the following searches:
    -p      programming languages only
    -d      data files only
    -m      markup files only
    -a      every file
    --json  used before any of the above to produce JSON output
    -h      print help menu
</code></pre>

<p>The <code>-a</code> flag is used by default if no option is used. The <code>--json</code> flag is by default set to <code>False</code>. </p>

<h4>
<a name="debug" class="anchor" href="#debug"><span class="octicon octicon-link"></span></a>Debug</h4>

<p>The debug option is a specific variable located at the top of the <code>polyglot.py</code> file which is <code>False</code> by default.
With the debug option:</p>

<pre><code>$ python polyglot.py ../polyglot/

** Python: 60.0%
    polyglot\heuristics.py
    polyglot\polyglot.py
    polyglot\__init__.py

** YAML: 40.0%
    polyglot\languages.yml
    polyglot\syntax.yml
Unknown extensions:
'txt', 'pyc'
</code></pre>

<h3>
<a name="stand-alone-app" class="anchor" href="#stand-alone-app"><span class="octicon octicon-link"></span></a>Stand-alone app</h3>

<p>There are two ways of running it as an app: with or without the debug unknown languages' option. The debug option is a specific variable located at the top of the <code>polyglot.py</code> file which is <code>False</code> by default.</p>

<p>Running the program on its own <code>polyglot/</code> folder in it's simplest form (without any flags or the debug option):</p>

<pre><code>$ python polyglot.py ../polyglot/

** Python: 60.0%
    polyglot\heuristics.py
    polyglot\polyglot.py
    polyglot\__init__.py

** YAML: 40.0%
    polyglot\languages.yml
    polyglot\syntax.yml
</code></pre>

<h3>
<a name="module" class="anchor" href="#module"><span class="octicon octicon-link"></span></a>Module</h3>

<p>If you want to integrate Polyglot in a different application, there is the possibility of importing it as a module. 
An simple example of this usage would be the following script:</p>

<pre><code>import polyglot

fileName, flag = parseCommandLine()

if flag == -1:
    exit()

poly = polyglot.Polyglot (fileName, flag)
results = poly.startPolyglot()

print results
</code></pre>

<p>Now an example that enables the debug option:</p>

<pre><code>import polyglot

fileName, flag = polyglot.parseCommandLine()

if flag == -1:
    exit()

poly = polyglot.Polyglot (fileName, flag, True)
results = poly.startPolyglot()

print "Files recognized:\n ", results[0]
print "Files not recognized: \n", results[1]
</code></pre>

<p>As you can see, if the debug option is enabled Polyglot will return a tuple containing the language statistics dictionary in it's first index and an array containing every unkown extension found (stuff like build and compiled files will be the vast majority of what you see here).</p>

<h3>
<a name="json-output" class="anchor" href="#json-output"><span class="octicon octicon-link"></span></a>JSON output</h3>

<p>If you want to get JSON output instead of those nasty strings, being it for use in a backend script with PHP or because you want to integrate the module with another language, this would be the result:</p>

<pre><code>$ python polyglot.py --json ../polyglot/

{
    "Python": 0.6,
    "YAML": 0.4,
    "nFiles": 5
}
</code></pre>

<h2>
<a name="dependencies" class="anchor" href="#dependencies"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul>
<li><a href="http://http://pyyaml.org/">PyYAML</a></li>
</ul><h2>
<a name="language-detection" class="anchor" href="#language-detection"><span class="octicon octicon-link"></span></a>Language Detection</h2>

<p>Language detection works in three stages. If any of the stages succeds in identifying the file language, the next stages are not executed.</p>

<p>First, there is the basic detection stage, in which Polyglot tries to match the file extension with a language stored in a .yml file. If a file with a ambiguous extension (like .pl) is found, this stage fails and Polyglot moves on to the next stage of detection.</p>

<p>After that, there is the heuristics stage, in which Polyglot tries to disambiguate between multiple languages that can be assigned to a file.</p>

<p>Lastly, there is the (as of yet non-existent) classifier stage. This feature isn't implemented yet as we would like to solidify the basis of Polyglot before we move on.</p>

<h3>
<a name="basic-detection" class="anchor" href="#basic-detection"><span class="octicon octicon-link"></span></a>Basic Detection</h3>

<p>First we run a simple extension analyzer. Since most filename extensions aren't common to several languages, in most cases, specially with simple projects this works like a charm and is quite fast.</p>

<p>We run the <code>runAnalysis</code> recursively. This function differentiates between directories and files. If it's running with a file as an argument it calls <code>updateStats</code> to update the info or, if it finds a directory, it runs itself with every file it finds as an argument.</p>

<h3>
<a name="heuristics" class="anchor" href="#heuristics"><span class="octicon octicon-link"></span></a>Heuristics</h3>

<p>For extensions that Polyglot can't assign to a single language like '.pl' (Prolog and Perl) or '.h' (headers of most C variants), heuristics are employed to find the language in function of what's written on the file. Some language specific syntax strings (like ':-' for Prolog) are used as a way to disambiguate between languages. For now it's pretty indecent but it'll work just fine.</p>

<h3>
<a name="classifier" class="anchor" href="#classifier"><span class="octicon octicon-link"></span></a>Classifier</h3>

<p>For extensions that cannot be disambiguated by the application of heuristics we are building a statistical classifier that determines what is the most likely language for the file in question.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>